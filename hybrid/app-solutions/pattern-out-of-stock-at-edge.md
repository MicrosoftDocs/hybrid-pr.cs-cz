---
title: Neuložené zjišťování pomocí Azure a Azure Stack Edge
description: Naučte se používat Azure a Azure Stack Edge Services k implementaci detekce z provozu.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 06/17/2020
ms.locfileid: "84910140"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="d3048-103">Zjišťování z hranice hraničního modelu z neaktivního zásobníku</span><span class="sxs-lookup"><span data-stu-id="d3048-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="d3048-104">Tento model znázorňuje, jak zjistit, jestli jsou položky police mimo skladové položky pomocí Azure Stack hraničních zařízení nebo Azure IoT Edgech síťových fotoaparátů.</span><span class="sxs-lookup"><span data-stu-id="d3048-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="d3048-105">Kontext a problém</span><span class="sxs-lookup"><span data-stu-id="d3048-105">Context and problem</span></span>

<span data-ttu-id="d3048-106">Fyzické maloobchodní obchody ztratí prodej, protože když zákazníci hledají položku, neexistují na police.</span><span class="sxs-lookup"><span data-stu-id="d3048-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="d3048-107">Položka však může být na zadní straně úložiště a nebyla přeuložená.</span><span class="sxs-lookup"><span data-stu-id="d3048-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="d3048-108">Úložiště by chtěla používat své zaměstnance efektivněji a automaticky dostávat oznámení, když je potřeba přezásobovat položky.</span><span class="sxs-lookup"><span data-stu-id="d3048-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="d3048-109">Řešení</span><span class="sxs-lookup"><span data-stu-id="d3048-109">Solution</span></span>

<span data-ttu-id="d3048-110">Příklad řešení používá hraniční zařízení, například Azure Stack Edge v každém obchodě, což efektivně zpracovává data z fotoaparátů v úložišti.</span><span class="sxs-lookup"><span data-stu-id="d3048-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="d3048-111">Tento optimalizovaný návrh umožňuje úložištím odesílat do cloudu pouze relevantní události a obrázky.</span><span class="sxs-lookup"><span data-stu-id="d3048-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="d3048-112">Návrh šetří šířku pásma, prostor úložiště a zajišťuje ochranu osobních údajů zákazníků.</span><span class="sxs-lookup"><span data-stu-id="d3048-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="d3048-113">Když jsou snímky čteny z jednotlivých kamer, model ML zpracuje obrázek a vrátí z oblasti akcií.</span><span class="sxs-lookup"><span data-stu-id="d3048-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="d3048-114">Obrázek a mimo oblast zásob se zobrazí v místní webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="d3048-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="d3048-115">Tato data se dají odeslat do prostředí Time Series Insight, kde se zobrazí přehledy o Power BI.</span><span class="sxs-lookup"><span data-stu-id="d3048-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Neuložený v architektuře hraničních řešení](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="d3048-117">Jak řešení funguje:</span><span class="sxs-lookup"><span data-stu-id="d3048-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="d3048-118">Image se zaznamenávají ze síťové kamery přes protokol HTTP nebo RTSP.</span><span class="sxs-lookup"><span data-stu-id="d3048-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="d3048-119">Velikost bitové kopie se změní a pošle se do ovladače odvození, který komunikuje s modelem ML a určí, jestli jsou dostupné žádné z uložených imagí.</span><span class="sxs-lookup"><span data-stu-id="d3048-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="d3048-120">Model ML vrátí jakékoli z burzovních oblastí.</span><span class="sxs-lookup"><span data-stu-id="d3048-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="d3048-121">Ovladač Inferencing nahraje nezpracovaný obrázek do objektu BLOB (Pokud je zadaný) a pošle výsledky z modelu do Azure IoT Hub a s procesorem ohraničujícího pole na zařízení.</span><span class="sxs-lookup"><span data-stu-id="d3048-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="d3048-122">Procesor ohraničujících uzlů přidává do obrázku ohraničovací rámečky a cestu k imagi ukládá do mezipaměti v paměti databáze.</span><span class="sxs-lookup"><span data-stu-id="d3048-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="d3048-123">Webová aplikace se dotazuje na obrázky a zobrazí je v přijatém pořadí.</span><span class="sxs-lookup"><span data-stu-id="d3048-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="d3048-124">Zprávy z IoT Hub jsou agregovány v Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="d3048-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="d3048-125">Power BI zobrazí interaktivní sestavu z neskladovaných položek v průběhu času s daty z Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="d3048-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="d3048-126">Komponenty</span><span class="sxs-lookup"><span data-stu-id="d3048-126">Components</span></span>

<span data-ttu-id="d3048-127">Toto řešení používá následující komponenty:</span><span class="sxs-lookup"><span data-stu-id="d3048-127">This solution uses the following components:</span></span>

| <span data-ttu-id="d3048-128">Vrstva</span><span class="sxs-lookup"><span data-stu-id="d3048-128">Layer</span></span> | <span data-ttu-id="d3048-129">Součást</span><span class="sxs-lookup"><span data-stu-id="d3048-129">Component</span></span> | <span data-ttu-id="d3048-130">Description</span><span class="sxs-lookup"><span data-stu-id="d3048-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="d3048-131">Místní hardware</span><span class="sxs-lookup"><span data-stu-id="d3048-131">On-premises hardware</span></span> | <span data-ttu-id="d3048-132">Síťová kamera</span><span class="sxs-lookup"><span data-stu-id="d3048-132">Network camera</span></span> | <span data-ttu-id="d3048-133">Je vyžadován síťový fotoaparát s kanálem HTTP nebo RTSP pro poskytování imagí pro odvození.</span><span class="sxs-lookup"><span data-stu-id="d3048-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="d3048-134">Azure</span><span class="sxs-lookup"><span data-stu-id="d3048-134">Azure</span></span> | <span data-ttu-id="d3048-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="d3048-135">Azure IoT Hub</span></span> | <span data-ttu-id="d3048-136">[Azure IoT Hub](/azure/iot-hub/) zpracovává zřizování zařízení a zasílání zpráv pro hraniční zařízení.</span><span class="sxs-lookup"><span data-stu-id="d3048-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="d3048-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="d3048-137">Azure Time Series Insights</span></span> | <span data-ttu-id="d3048-138">[Azure Time Series Insights](/azure/time-series-insights/) ukládá zprávy z IoT Hub pro vizualizaci.</span><span class="sxs-lookup"><span data-stu-id="d3048-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="d3048-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="d3048-139">Power BI</span></span> | <span data-ttu-id="d3048-140">[Microsoft Power BI](https://powerbi.microsoft.com/) poskytuje podnikové sestavy o neskladovaných událostech.</span><span class="sxs-lookup"><span data-stu-id="d3048-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="d3048-141">Power BI poskytuje snadno použitelné rozhraní řídicího panelu pro zobrazení výstupu z Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="d3048-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="d3048-142">Azure Stack Edge nebo</span><span class="sxs-lookup"><span data-stu-id="d3048-142">Azure Stack Edge or</span></span><br><span data-ttu-id="d3048-143">Azure IoT Edge zařízení</span><span class="sxs-lookup"><span data-stu-id="d3048-143">Azure IoT Edge device</span></span> | <span data-ttu-id="d3048-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="d3048-144">Azure IoT Edge</span></span> | <span data-ttu-id="d3048-145">[Azure IoT Edge](/azure/iot-edge/) orchestruje modul runtime pro místní kontejnery a zpracovává správu a aktualizace zařízení.</span><span class="sxs-lookup"><span data-stu-id="d3048-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="d3048-146">Brainwave projektu Azure</span><span class="sxs-lookup"><span data-stu-id="d3048-146">Azure project brainwave</span></span> | <span data-ttu-id="d3048-147">V Azure Stack hraničním zařízení [Brainwave Project](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) pro zrychlení inferencingí používá pole brány (FPGA) s programovatelnými poli.</span><span class="sxs-lookup"><span data-stu-id="d3048-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="d3048-148">Problémy a důležité informace</span><span class="sxs-lookup"><span data-stu-id="d3048-148">Issues and considerations</span></span>

<span data-ttu-id="d3048-149">Při rozhodování, jak implementovat toto řešení, vezměte v úvahu následující body:</span><span class="sxs-lookup"><span data-stu-id="d3048-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="d3048-150">Škálovatelnost</span><span class="sxs-lookup"><span data-stu-id="d3048-150">Scalability</span></span>

<span data-ttu-id="d3048-151">Většina modelů strojového učení se dá spustit jenom na určitém počtu snímků za sekundu v závislosti na zadaném hardwaru.</span><span class="sxs-lookup"><span data-stu-id="d3048-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="d3048-152">Určete optimální vzorkovací frekvenci z fotoaparátů, aby se zajistilo, že kanál ML nezálohuje.</span><span class="sxs-lookup"><span data-stu-id="d3048-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="d3048-153">Různé typy hardwaru budou pracovat s různými počty fotoaparátů a snímků.</span><span class="sxs-lookup"><span data-stu-id="d3048-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="d3048-154">Dostupnost</span><span class="sxs-lookup"><span data-stu-id="d3048-154">Availability</span></span>

<span data-ttu-id="d3048-155">Je důležité zvážit, co se může stát, když hraniční zařízení ztratí připojení.</span><span class="sxs-lookup"><span data-stu-id="d3048-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="d3048-156">Zvažte, jaká data mohou být ztracena z Time Series Insights a Power BI řídicím panelu.</span><span class="sxs-lookup"><span data-stu-id="d3048-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="d3048-157">Ukázkové řešení, které je uvedené, není navržené tak, aby bylo vysoce dostupné.</span><span class="sxs-lookup"><span data-stu-id="d3048-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="d3048-158">Možnosti správy</span><span class="sxs-lookup"><span data-stu-id="d3048-158">Manageability</span></span>

<span data-ttu-id="d3048-159">Toto řešení může zahrnovat mnoho zařízení a umístění, což by mohlo mít nepraktický.</span><span class="sxs-lookup"><span data-stu-id="d3048-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="d3048-160">Služby IoT v Azure můžou automaticky přenést nová umístění a zařízení do režimu online a udržovat je v aktuálním stavu.</span><span class="sxs-lookup"><span data-stu-id="d3048-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="d3048-161">Musí následovat i správné postupy správného řízení dat.</span><span class="sxs-lookup"><span data-stu-id="d3048-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="d3048-162">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="d3048-162">Security</span></span>

<span data-ttu-id="d3048-163">Tento model zpracovává potenciálně citlivá data.</span><span class="sxs-lookup"><span data-stu-id="d3048-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="d3048-164">Ujistěte se, že jsou klíče pravidelně otočené a že jsou správně nastavená oprávnění pro účet Azure Storage a místní sdílené složky.</span><span class="sxs-lookup"><span data-stu-id="d3048-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d3048-165">Další kroky</span><span class="sxs-lookup"><span data-stu-id="d3048-165">Next steps</span></span>

<span data-ttu-id="d3048-166">Další informace o tématech zavedených v tomto článku:</span><span class="sxs-lookup"><span data-stu-id="d3048-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="d3048-167">V tomto vzoru se používá několik služeb souvisejících s IoT, včetně [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/)a [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="d3048-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="d3048-168">Další informace o Microsoft Project Brainwave najdete [v oznámení na blogu](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) a s využitím [Projectu Brainwave video k rezervaci Azure akcelerovaných Machine Learning](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="d3048-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="d3048-169">Další informace o osvědčených postupech a odpovědi na další otázky najdete v tématu [aspekty návrhu hybridní aplikace](overview-app-design-considerations.md) .</span><span class="sxs-lookup"><span data-stu-id="d3048-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="d3048-170">Další informace o celém portfoliu produktů a řešení najdete v [Azure Stack rodině produktů a řešení](/azure-stack) .</span><span class="sxs-lookup"><span data-stu-id="d3048-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="d3048-171">Až budete připraveni otestovat příklad řešení, pokračujte v [Průvodci nasazením vrstvených dat pro analytické řešení](https://aka.ms/edgeinferencingdeploy).</span><span class="sxs-lookup"><span data-stu-id="d3048-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="d3048-172">Průvodce nasazením poskytuje podrobné pokyny pro nasazení a testování jeho komponent.</span><span class="sxs-lookup"><span data-stu-id="d3048-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
